# AIBetExplorer - Текущее состояние проекта

## Текущий фокус разработки

Проект находится в стадии активной разработки. Основной функционал загрузки данных с BetExplorer и анализа ставок реализован, но требует доработки и оптимизации.

## Недавние изменения

- Реализован полный цикл загрузки данных с BetExplorer.com
- Создана структура базы данных с моделями SQLAlchemy
- Реализован модуль прогнозирования и расчета ставок по критерию Келли
- Добавлена поддержка многопроцессорной обработки для ускорения загрузки

## Следующие шаги

1. Оптимизация производительности загрузки данных
2. Улучшение алгоритмов прогнозирования
3. Добавление поддержки большего количества видов спорта
4. Создание веб-интерфейса для удобного использования
5. Добавление модульного тестирования

## Известные проблемы и ограничения

1. **Производительность**: Загрузка данных для большого количества чемпионатов может занимать значительное время
2. **Обработка ошибок**: Не все сценарии ошибок при загрузке данных обработаны корректно
3. **Кэширование**: Отсутствует эффективный механизм кэширования данных
4. **Тестирование**: Покрытие тестами недостаточно полное

## Текущая конфигурация

- **База данных**: PostgreSQL (test77) на localhost
- **Каталог загрузки**: F:\download\betexplorer
- **Каталог вывода**: D:\FBcup
- **Виды спорта**: Футбол, баскетбол, хоккей, теннис, бейсбол, волейбол, гандбол
- **Режим работы**: DATABASE_WRITE_DATA (чтение и запись)
- **Загрузка из сети**: False (используются сохраненные данные)
- **Количество процессов**: 7

## Активные модули

### app/betexplorer/
- **betexplorer.py**: Основной модуль загрузки данных (1233 строки)
- **models.py**: Модели базы данных (312 строк)
- **schemas.py**: Типизированные структуры данных (272 строки)
- **crud.py**: Операции CRUD (908 строк)

### app/fbcup/
- **analysis.py**: Анализ ставок (107 строк)
- **forecast.py**: Прогнозирование результатов (156 строк)
- **bet.py**: Расчет ставок по Келли (314 строк)
- **statistic.py**: Расчет статистики (199 строк)
- **rating.py**: Расчет рейтингов (218 строк)
- **bet_summary.py**: Итоги ставок (91 строк)
- **analys_config.py**: Конфигурация анализа (9 строк)

### Инфраструктура
- **database.py**: Менеджер сессий БД (234 строки)
- **utilbase.py**: Утилиты загрузки/сохранения (304 строки)
- **main.py**: Точка входа для загрузки (42 строки)
- **analysis.py**: Точка входа для анализа (40 строк)

## Статус тестирования

- Есть базовые тесты в `app/tests/`
- Тестовые данные загружаются из `app/tests/download/`
- Используются pytest и pytest-asyncio
- Покрытие тестами требует расширения

## Зависимости проекта

Основные зависимости из requirements.txt:
- aiosqlite, aiofiles, aiohttp - асинхронная работа с файлами и HTTP
- asyncpg, psycopg2 - драйверы PostgreSQL
- SQLAlchemy - ORM
- selectolax - быстрый HTML парсер
- polars-lts-cpu, pandera - анализ данных
- pytest, pytest-asyncio, pytest-mock - тестирование
- ruff - линтинг
- deepdiff - сравнение данных
